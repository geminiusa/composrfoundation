<?php
return unserialize("a:6:{i:0;a:1:{i:0;a:5:{i:0;s:26:\"tcpfunc_JAVASCRIPT_POSTING\";i:1;a:0:{}i:2;i:1;i:3;s:0:\"\";i:4;s:0:\"\";}}i:1;a:0:{}i:2;s:18:\"JAVASCRIPT_POSTING\";i:3;N;i:4;N;i:5;s:30215:\"\$TPL_FUNCS['tcpfunc_JAVASCRIPT_POSTING']=\" echo \\\"\\\\\\\"use strict\\\\\\\";\\\\n\\\\n/* Form editing code (mostly stuff only used on posting forms) */\\\\n\\\\n// ===========\\\\n// ATTACHMENTS\\\\n// ===========\\\\n\\\\nfunction add_attachment(start_num\\\",\\n	',',\\n	\\\"posting_field_name)\\\\n{\\\\n	if (typeof window.num_attachments=='undefined') return;\\\\n	if (typeof window.max_attachments=='undefined') return;\\\\n\\\\n	var add_to=document.getElementById('attachment_store');\\\\n\\\\n	window.num_attachments++;\\\\n\\\\n	var new_div=document.createElement('div');\\\\n	set_inner_html(new_div\\\",\\n	',',\\n	\\\"window.attachment_template.replace(/\\\\\\\\_\\\\\\\\_num_attachments\\\\\\\\_\\\\\\\\_/g\\\",\\n	',',\\n	\\\"window.num_attachments));\\\\n	add_to.appendChild(new_div);\\\\n	document.getElementById('file'+window.num_attachments).setAttribute('unselectable'\\\",\\n	',',\\n	\\\"'on');\\\\n\\\\n	if (window.num_attachments==window.max_attachments)\\\\n	{\\\\n		var btn=document.getElementById('add_another_button');\\\\n		if (btn) btn.disabled=true;\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n	if (typeof window.trigger_resize!='undefined') trigger_resize();\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction attachment_present(post_value\\\",\\n	',',\\n	\\\"number)\\\\n{\\\\n	return !(post_value.indexOf('[attachment]new_'+number+'[/attachment]')==-1) && (post_value.indexOf('[attachment_safe]new_'+number+'[/attachment_safe]')==-1) && (post_value.indexOf('[attachment thumb=\\\\\\\"1\\\\\\\"]new_'+number+'[/attachment]')==-1) && (post_value.indexOf('[attachment_safe thumb=\\\\\\\"1\\\\\\\"]new_'+number+'[/attachment_safe]')==-1) && (post_value.indexOf('[attachment thumb=\\\\\\\"0\\\\\\\"]new_'+number+'[/attachment]')==-1) && (post_value.indexOf('[attachment_safe thumb=\\\\\\\"0\\\\\\\"]new_'+number+'[/attachment_safe]')==-1);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction set_attachment(field_name\\\",\\n	',',\\n	\\\"number\\\",\\n	',',\\n	\\\"filename)\\\\n{\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.num_attachments=='undefined') return;\\\\n	if (typeof window.max_attachments=='undefined') return;\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n\\\\n	var tmp_form=post.form;\\\\n	if ((tmp_form) && (tmp_form.preview))\\\\n	{\\\\n		tmp_form.preview.checked=false;\\\\n		tmp_form.preview.disabled=true;\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n	var post_value=get_textbox(post);\\\\n	var done=attachment_present(post.value\\\",\\n	',',\\n	\\\"number) || attachment_present(post_value\\\",\\n	',',\\n	\\\"number) || (tmp_form.getAttribute('itemtype')=='http://schema.org/ContactPage');\\\\n	if (!done)\\\\n	{\\\\n		var filepath=filename;\\\\n		if ((!filename) && (document.getElementById('file'+number)))\\\\n		{\\\\n			filepath=document.getElementById('file'+number).value;\\\\n		\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n		var is_archive=true\\\",\\n	',',\\n	\\\"is_image=true;\\\\n		if (filepath!='')\\\\n		{\\\\n			var ext=filepath.substr(filepath.length-4\\\",\\n	',',\\n	\\\"4).toLowerCase();\\\\n\\\\n			is_archive=(ext=='.tar') || (ext=='.zip');\\\\n			is_image=(ext=='.png') || (ext=='.jpg') || (ext=='jpeg') || (ext=='.gif');\\\\n		\\\",\\n	\\\"}\\\",\\n	\\\" else return; // Upload error\\\\n\\\\n		var wysiwyg=is_wysiwyg_field(document.getElementById(field_name));\\\\n\\\\n		if ((typeof window.event!='undefined') && (window.event)) window.event.returnValue=false;\\\\n		var url='\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT\\\",array(\\\"comcode_helper\\\")),\\n	\\\"';\\\\n		url+='?field_name='+field_name;\\\\n		url+='&type=step2';\\\\n		url+='&tag='+(is_image?'attachment_safe':'attachment');\\\\n		url+='&default=new_'+number;\\\\n		url+='&default_thumb=1';\\\\n		url+='&default_type='+(is_archive?'download':(is_image?'inline':'island'));\\\\n		url+='&is_archive='+(is_archive?'1':'0');\\\\n		url+='&is_image='+(is_image?'1':'0');\\\\n		url+='&caption='+window.encodeURIComponent(filepath); // Default caption to local file path\\\\n		if (wysiwyg) url+='&in_wysiwyg=1';\\\\n		url+=keep_stub();\\\\n		window.setTimeout(function() {\\\\n			window.faux_showModalDialog(\\\\n				maintain_theme_in_link(url)\\\",\\n	',',\\n	\\\"\\\\n				''\\\",\\n	',',\\n	\\\"\\\\n				'width=750\\\",\\n	',',\\n	\\\"height=530\\\",\\n	',',\\n	\\\"status=no\\\",\\n	',',\\n	\\\"resizable=yes\\\",\\n	',',\\n	\\\"scrollbars=yes\\\",\\n	',',\\n	\\\"unadorned=yes'\\\",\\n	',',\\n	\\\"\\\\n				function(ret)\\\\n				{\\\\n					if (ret)\\\\n					{\\\\n						// Add field for next one\\\\n						var add_another_field=(number==window.num_attachments) && (window.num_attachments<window.max_attachments); // Needs running late\\\",\\n	',',\\n	\\\" in case something happened inbetween\\\\n						if (add_another_field)\\\\n						{\\\\n							add_attachment(window.num_attachments+1\\\",\\n	',',\\n	\\\"field_name);\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\" else // Cancelled\\\\n					{\\\\n						var clear_button=document.getElementById('fsClear_file'+number);\\\\n						if (clear_button)\\\\n						{\\\\n							clear_button.onclick();\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			);\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"800 ); // In a timeout to disassociate possible 'enter' keypress which could have led to this function being called [enter on the file selection dialogue] and could propagate through (on Google Chrome anyways\\\",\\n	',',\\n	\\\" maybe a browser bug)\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n	{\\\\n		// Add field for next one\\\\n		var add_another_field=(number==window.num_attachments) && (window.num_attachments<window.max_attachments);\\\\n		if (add_another_field)\\\\n			add_attachment(window.num_attachments+1\\\",\\n	',',\\n	\\\"field_name);\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n// ====================\\\\n// COMCODE UI FUNCTIONS\\\\n// ====================\\\\n\\\\nfunction do_input_html(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n	insert_textbox_wrapping(post\\\",\\n	',',\\n	\\\"'semihtml'\\\",\\n	',',\\n	\\\"'');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_code(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n	insert_textbox_wrapping(post\\\",\\n	',',\\n	\\\"'codebox'\\\",\\n	',',\\n	\\\"'');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_quote(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_QUOTE_BY\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if (va!==null) insert_textbox_wrapping(post\\\",\\n	',',\\n	\\\"'[quote=\\\\\\\\\\\\\\\"'+va+'\\\\\\\\\\\\\\\"]'\\\",\\n	',',\\n	\\\"'[/quote]');\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_quote\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_box(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_BOX_TITLE\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if (va!==null) insert_textbox_wrapping(post\\\",\\n	',',\\n	\\\"'[box=\\\\\\\\\\\\\\\"'+va+'\\\\\\\\\\\\\\\"]'\\\",\\n	',',\\n	\\\"'[/box]');\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_box\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_menu(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_MENU_NAME\\\",array(\\\"'+(document.getElementById(field_name).form.menu_items.value)+'\\\")),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if (va)\\\\n			{\\\\n				window.fauxmodal_prompt(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_MENU_CAPTION\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					''\\\",\\n	',',\\n	\\\"\\\\n					function(vb)\\\\n					{\\\\n						if (!vb) vb='';\\\\n\\\\n						var add;\\\\n						var element=document.getElementById(field_name);\\\\n						element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n						if (is_comcode_xml(element))\\\\n						{\\\\n							add='<block><blockParam key=\\\\\\\\\\\\\\\"type\\\\\\\\\\\\\\\" val=\\\\\\\\\\\\\\\"tree\\\\\\\\\\\\\\\" /><blockParam key=\\\\\\\\\\\\\\\"caption\\\\\\\\\\\\\\\" val=\\\\\\\\\\\\\\\"\\\\\\\"+escape_html(vb)+\\\\\\\"\\\\\\\\\\\\\\\" /><blockParam key=\\\\\\\\\\\\\\\"param\\\\\\\\\\\\\\\" val=\\\\\\\\\\\\\\\"\\\\\\\"+escape_html(va)+\\\\\\\"\\\\\\\\\\\\\\\" />side_stored_menu</block>';\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n						{\\\\n							add='[block=\\\\\\\\\\\\\\\"\\\\\\\"+escape_comcode(va)+\\\\\\\"\\\\\\\\\\\\\\\" caption=\\\\\\\\\\\\\\\"\\\\\\\"+escape_comcode(vb)+\\\\\\\"\\\\\\\\\\\\\\\" type=\\\\\\\\\\\\\\\"tree\\\\\\\\\\\\\\\"]side_stored_menu[/block]';\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n						insert_textbox(element\\\",\\n	',',\\n	\\\"add);\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_menu\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_menu\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_block(field_name)\\\\n{\\\\n	if ((typeof window.event!='undefined') && (window.event)) window.event.returnValue=false;\\\\n	var url='\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT\\\",array(\\\"block_helper\\\")),\\n	\\\"?field_name='+field_name+keep_stub();\\\\n	url=url+'&block_type='+(((field_name.indexOf('edit_panel_')==-1) && (window.location.href.indexOf(':panel_')==-1))?'main':'side');\\\\n	window.faux_open(maintain_theme_in_link(url)\\\",\\n	',',\\n	\\\"''\\\",\\n	',',\\n	\\\"'width=750\\\",\\n	',',\\n	\\\"height=520\\\",\\n	',',\\n	\\\"status=no\\\",\\n	',',\\n	\\\"resizable=yes\\\",\\n	',',\\n	\\\"scrollbars=yes'\\\",\\n	',',\\n	\\\"null\\\",\\n	',',\\n	\\\"'\\\",\\n	ecv(\\\$cl,array(2),2,\\\"INPUTSYSTEM_CANCEL\\\",array()),\\n	\\\"');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_comcode(field_name\\\",\\n	',',\\n	\\\"tag)\\\\n{\\\\n	if ((typeof window.event!='undefined') && (window.event)) window.event.returnValue=false;\\\\n	var url='\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT\\\",array(\\\"comcode_helper\\\")),\\n	\\\"?field_name='+field_name;\\\\n	if (tag) url+='&type=step2&tag='+tag;\\\\n	if (is_wysiwyg_field(document.getElementById(field_name))) url+='&in_wysiwyg=1';\\\\n	url+=keep_stub();\\\\n	window.faux_open(maintain_theme_in_link(url)\\\",\\n	',',\\n	\\\"''\\\",\\n	',',\\n	\\\"'width=750\\\",\\n	',',\\n	\\\"height=520\\\",\\n	',',\\n	\\\"status=no\\\",\\n	',',\\n	\\\"resizable=yes\\\",\\n	',',\\n	\\\"scrollbars=yes'\\\",\\n	',',\\n	\\\"null\\\",\\n	',',\\n	\\\"'\\\",\\n	ecv(\\\$cl,array(2),2,\\\"INPUTSYSTEM_CANCEL\\\",array()),\\n	\\\"');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_list(field_name\\\",\\n	',',\\n	\\\"add)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	if (typeof add=='undefined') var add=[];\\\\n\\\\n	var post=document.getElementById(field_name);\\\\n	post=ensure_true_id(post\\\",\\n	',',\\n	\\\"field_name);\\\\n	insert_textbox(post\\\",\\n	',',\\n	\\\"'\\\\\\\\n');\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_LIST_ENTRY\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if ((va!=null) && (va!=''))\\\\n			{\\\\n				add.push(va);\\\\n				return do_input_list(field_name\\\",\\n	',',\\n	\\\"add)\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			if (add.length==0) return;\\\\n			var i;\\\\n			if (is_comcode_xml(post))\\\\n			{\\\\n				insert_textbox(post\\\",\\n	',',\\n	\\\"'<list>\\\\\\\\n')\\\\n				for (i=0;i<add.length;i++)\\\\n				{\\\\n					insert_textbox(post\\\",\\n	',',\\n	\\\"'<list_element>'+add[i]+'</list_element>\\\\\\\\n')\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				insert_textbox(post\\\",\\n	',',\\n	\\\"'</list>\\\\\\\\n')\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n			{\\\\n				if (post.value.indexOf('[semihtml')!=-1)\\\\n					insert_textbox(post\\\",\\n	',',\\n	\\\"'[list]\\\\\\\\n')\\\\n				for (i=0;i<add.length;i++)\\\\n				{\\\\n					if (post.value.indexOf('[semihtml')!=-1)\\\\n					{\\\\n						insert_textbox(post\\\",\\n	',',\\n	\\\"'[*]'+add[i]+'\\\\\\\\n')\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n					{\\\\n						insert_textbox(post\\\",\\n	',',\\n	\\\"' - '+add[i]+'\\\\\\\\n')\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				if (post.value.indexOf('[semihtml')!=-1)\\\\n					insert_textbox(post\\\",\\n	',',\\n	\\\"'[/list]\\\\\\\\n')\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_list\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_hide(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_WARNING\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if (va)\\\\n			{\\\\n				window.fauxmodal_prompt(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_HIDDEN_TEXT\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					''\\\",\\n	',',\\n	\\\"\\\\n					function(vb)\\\\n					{\\\\n						var element=document.getElementById(field_name);\\\\n						element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n						if (vb)\\\\n						{\\\\n							if (is_comcode_xml(element))\\\\n							{\\\\n								insert_textbox(element\\\",\\n	',',\\n	\\\"'<hide><hideTitle>'+va+'</hideTitle>'+escape_html(vb)+'</hide>');\\\\n							\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n							{\\\\n								insert_textbox(element\\\",\\n	',',\\n	\\\"'[hide=\\\\\\\\\\\\\\\"'+escape_comcode(va)+'\\\\\\\\\\\\\\\"]'+escape_comcode(vb)+'[/hide]');\\\\n							\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_hide\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_hide\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_thumb(field_name\\\",\\n	',',\\n	\\\"va)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_URL\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		va\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if ((va!=null) && (va.indexOf('://')==-1))\\\\n			{\\\\n				window.fauxmodal_alert('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"NOT_A_URL\\\",array()),\\n	\\\"');\\\\n				return do_input_thumb(field_name\\\",\\n	',',\\n	\\\"va);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n			if (va)\\\\n			{\\\\n				generate_question_ui(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"THUMB_OR_IMG_2\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					{thumbnail: '\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"THUMBNAIL\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"fullsize: '\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"IMAGE\\\",array()),\\n	\\\"'\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"_ATTACHMENT\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					null\\\",\\n	',',\\n	\\\"\\\\n					function(vb)\\\\n					{\\\\n						window.fauxmodal_prompt(\\\\n							'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_IMAGE_CAPTION\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n							''\\\",\\n	',',\\n	\\\"\\\\n							function(vc)\\\\n							{\\\\n								if (!vc) vc='';\\\\n\\\\n								var element=document.getElementById(field_name);\\\\n								element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n								if (vb.toLowerCase()=='\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"IMAGE\\\",array()),\\n	\\\"'.toLowerCase())\\\\n								{\\\\n									if (is_comcode_xml(element))\\\\n									{\\\\n										insert_textbox(element\\\",\\n	',',\\n	\\\"'<img url=\\\\\\\\\\\\\\\"'+escape_html(va)+'\\\\\\\\\\\\\\\" />'+escape_html(vc)+'</img>');\\\\n									\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n									{\\\\n										insert_textbox(element\\\",\\n	',',\\n	\\\"'[img=\\\\\\\\\\\\\\\"'+escape_comcode(vc)+'\\\\\\\\\\\\\\\"]'+escape_comcode(va)+'[/img]');\\\\n									\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n								\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n								{\\\\n									if (is_comcode_xml(element))\\\\n									{\\\\n										insert_textbox(element\\\",\\n	',',\\n	\\\"'<thumb caption=\\\\\\\\\\\\\\\"'+escape_html(vc)+'\\\\\\\\\\\\\\\">'+escape_html(va)+'</thumb>');\\\\n									\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n									{\\\\n										insert_textbox(element\\\",\\n	',',\\n	\\\"'[thumb caption=\\\\\\\\\\\\\\\"'+escape_comcode(vc)+'\\\\\\\\\\\\\\\"]'+escape_comcode(va)+'[/thumb]');\\\\n									\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n								\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n							\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n							'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_img\\\",array()),\\n	\\\"'\\\\n						);\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_img\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_img\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_attachment(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_ATTACHMENT\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		''\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if (!is_integer(va))\\\\n			{\\\\n				window.fauxmodal_alert('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"NOT_VALID_ATTACHMENT\\\",array()),\\n	\\\"');\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n			{\\\\n				var element=document.getElementById(field_name);\\\\n				element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n				if (is_comcode_xml(element))\\\\n				{\\\\n					insert_textbox(element\\\",\\n	',',\\n	\\\"'<attachment>new_'+va+'</attachment>');\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n				{\\\\n					insert_textbox(element\\\",\\n	',',\\n	\\\"'[attachment]new_'+va+'[/attachment]');\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_attachment\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_url(field_name\\\",\\n	',',\\n	\\\"va)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_URL\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		va\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if ((va!=null) && (va.indexOf('://')==-1))\\\\n			{\\\\n				window.fauxmodal_alert('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"NOT_A_URL\\\",array()),\\n	\\\"');\\\\n				return do_input_url(field_name\\\",\\n	',',\\n	\\\"va);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n			if (va!==null)\\\\n			{\\\\n				window.fauxmodal_prompt(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_LINK_NAME\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					''\\\",\\n	',',\\n	\\\"\\\\n					function(vb)\\\\n					{\\\\n						var element=document.getElementById(field_name);\\\\n						element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n						if (is_comcode_xml(element))\\\\n						{\\\\n							if (vb!=null) insert_textbox(element\\\",\\n	',',\\n	\\\"'<url param=\\\\\\\\\\\\\\\"'+escape_html(va)+'\\\\\\\\\\\\\\\">'+escape_html(vb)+'</url>');\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n						{\\\\n							if (vb!=null) insert_textbox(element\\\",\\n	',',\\n	\\\"'[url=\\\\\\\\\\\\\\\"'+escape_comcode(vb)+'\\\\\\\\\\\\\\\"]'+escape_comcode(va)+'[/url]');\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_url\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_url\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_page(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	var result;\\\\n\\\\n	if (typeof window.showModalDialog!='undefined'\\\",\\n	(\\\" || true\\\"),\\n	\\\")\\\\n	{\\\\n		window.faux_showModalDialog(\\\\n			maintain_theme_in_link('\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT\\\",array(\\\"page_link_chooser\\\")),\\n	\\\"'+keep_stub(true))\\\",\\n	',',\\n	\\\"\\\\n			null\\\",\\n	',',\\n	\\\"\\\\n			'dialogWidth=600;dialogHeight=400;status=no;unadorned=yes'\\\",\\n	',',\\n	\\\"\\\\n			function(result)\\\\n			{\\\\n				if ((typeof result=='undefined') || (result===null)) return;\\\\n\\\\n				window.fauxmodal_prompt(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_CAPTION\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					''\\\",\\n	',',\\n	\\\"\\\\n					function(vc)\\\\n					{\\\\n						_do_input_page(field_name\\\",\\n	',',\\n	\\\"result\\\",\\n	',',\\n	\\\"vc);\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_page\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		);\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n	{\\\\n		window.fauxmodal_prompt(\\\\n			'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_ZONE\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n			''\\\",\\n	',',\\n	\\\"\\\\n			function(va)\\\\n			{\\\\n				if (va!==null)\\\\n				{\\\\n					window.fauxmodal_prompt(\\\\n						'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_PAGE\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n						''\\\",\\n	',',\\n	\\\"\\\\n						function(vb)\\\\n						{\\\\n							if (vb!==null)\\\\n							{\\\\n								result=va+':'+vb;\\\\n\\\\n								window.fauxmodal_prompt(\\\\n									'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_CAPTION\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n									''\\\",\\n	',',\\n	\\\"\\\\n									function(vc)\\\\n									{\\\\n										_do_input_page(field_name\\\",\\n	',',\\n	\\\"result\\\",\\n	',',\\n	\\\"vc);\\\\n									\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n									'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_page\\\",array()),\\n	\\\"'\\\\n								);\\\\n							\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					);\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n			'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_page\\\",array()),\\n	\\\"'\\\\n		);\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction _do_input_page(field_name\\\",\\n	',',\\n	\\\"result\\\",\\n	',',\\n	\\\"vc)\\\\n{\\\\n	var element=document.getElementById(field_name);\\\\n	element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n	if (is_comcode_xml(element))\\\\n	{\\\\n		insert_textbox(element\\\",\\n	',',\\n	\\\"'<page pageLink=\\\\\\\\\\\\\\\"'+escape_html(result)+'\\\\\\\\\\\\\\\">'+escape_html(vc)+'</page>');\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n	{\\\\n		insert_textbox(element\\\",\\n	',',\\n	\\\"'[page=\\\\\\\\\\\\\\\"'+escape_comcode(result)+'\\\\\\\\\\\\\\\"]'+escape_comcode(vc)+'[/page]');\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_email(field_name\\\",\\n	',',\\n	\\\"va)\\\\n{\\\\n	if (typeof window.insert_textbox=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	window.fauxmodal_prompt(\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_ADDRESS\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n		va\\\",\\n	',',\\n	\\\"\\\\n		function(va)\\\\n		{\\\\n			if ((va!=null) && (va.indexOf('@')==-1))\\\\n			{\\\\n				window.fauxmodal_alert('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"NOT_A_EMAIL\\\",array()),\\n	\\\"');\\\\n				return do_input_email(field_name\\\",\\n	',',\\n	\\\"va);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n			if (va!==null)\\\\n			{\\\\n				window.fauxmodal_prompt(\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"ENTER_CAPTION\\\",array()),\\n	\\\"'\\\",\\n	',',\\n	\\\"\\\\n					''\\\",\\n	',',\\n	\\\"\\\\n					function(vb)\\\\n					{\\\\n						var element=document.getElementById(field_name);\\\\n						element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n						if (is_comcode_xml(element))\\\\n						{\\\\n							if (vb!==null) insert_textbox(element\\\",\\n	',',\\n	\\\"'<email address=\\\\\\\\\\\\\\\"'+escape_html(va)+'\\\\\\\\\\\\\\\">'+escape_html(vb)+'</email>');\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n						{\\\\n							if (vb!==null) insert_textbox(element\\\",\\n	',',\\n	\\\"'[email=\\\\\\\\\\\\\\\"'+escape_comcode(vb)+'\\\\\\\\\\\\\\\"]'+escape_comcode(va)+'[/email]');\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n					'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_email\\\",array()),\\n	\\\"'\\\\n				);\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		\\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"\\\\n		'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"comcode:INPUT_COMCODE_email\\\",array()),\\n	\\\"'\\\\n	);\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_b(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var element=document.getElementById(field_name);\\\\n	element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n	insert_textbox_wrapping(element\\\",\\n	',',\\n	\\\"'b'\\\",\\n	',',\\n	\\\"'');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_i(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n\\\\n	var element=document.getElementById(field_name);\\\\n	element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n	insert_textbox_wrapping(element\\\",\\n	',',\\n	\\\"'i'\\\",\\n	',',\\n	\\\"'');\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction do_input_font(field_name)\\\\n{\\\\n	if (typeof window.insert_textbox_wrapping=='undefined') return;\\\\n	if (typeof window.is_comcode_xml=='undefined') return;\\\\n\\\\n	var element=document.getElementById(field_name);\\\\n	element=ensure_true_id(element\\\",\\n	',',\\n	\\\"field_name);\\\\n	var form=element.form;\\\\n	var face=form.elements['f_face'];\\\\n	var size=form.elements['f_size'];\\\\n	var colour=form.elements['f_colour'];\\\\n	if ((face.value=='') && (size.value=='') && (colour.value==''))\\\\n	{\\\\n		window.fauxmodal_alert('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"NO_FONT_SELECTED\\\",array()),\\n	\\\"');\\\\n		return;\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n	if (is_comcode_xml(element))\\\\n	{\\\\n		insert_textbox_wrapping(document.getElementById(field_name)\\\",\\n	',',\\n	\\\"'<font param=\\\\\\\\\\\\\\\"'+escape_html(face.value)+'\\\\\\\\\\\\\\\" color=\\\\\\\\\\\\\\\"'+escape_html(colour.value)+'\\\\\\\\\\\\\\\" size=\\\\\\\\\\\\\\\"'+escape_html(size.value)+'\\\\\\\\\\\\\\\">'\\\",\\n	',',\\n	\\\"'</font>');\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n	{\\\\n		insert_textbox_wrapping(document.getElementById(field_name)\\\",\\n	',',\\n	\\\"'[font=\\\\\\\\\\\\\\\"'+escape_comcode(face.value)+'\\\\\\\\\\\\\\\" color=\\\\\\\\\\\\\\\"'+escape_comcode(colour.value)+'\\\\\\\\\\\\\\\" size=\\\\\\\\\\\\\\\"'+escape_comcode(size.value)+'\\\\\\\\\\\\\\\"]'\\\",\\n	',',\\n	\\\"'[/font]');\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction set_font_sizes(list)\\\\n{\\\\n	var i=0;\\\\n	for (i=1;i<list.options.length;i++)\\\\n	{\\\\n		list.options[i].style.fontSize=list.options[i].value+'em';\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction deset_font_sizes(list)\\\\n{\\\\n	var i=0;\\\\n	for (i=1;i<list.options.length;i++)\\\\n	{\\\\n		list.options[i].style.fontSize='';\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n// =====\\\\n// OTHER\\\\n// =====\\\\n\\\\nfunction init_form_saving(form_id)\\\\n{\\\\n	var posting_form=document.getElementById(form_id);\\\\n	var i\\\",\\n	',',\\n	\\\"name\\\",\\n	',',\\n	\\\"fields_to_do=[]\\\",\\n	',',\\n	\\\"cookie_name\\\",\\n	',',\\n	\\\"fields_to_do_counter=0\\\",\\n	',',\\n	\\\"biggest_length_data=''\\\",\\n	',',\\n	\\\"cookie_value\\\",\\n	',',\\n	\\\"result\\\",\\n	',',\\n	\\\"type;\\\\n	for (i=0;i<posting_form.elements.length;i++)\\\\n	{\\\\n		name=posting_form.elements[i].name;\\\\n		type=posting_form.elements[i].getAttribute('type');\\\\n		if ((name!='') && ((posting_form.elements[i].nodeName.toLowerCase()=='textarea') || (type=='text') || (type=='color') || (type=='email') || (type=='number') || (type=='range') || (type=='search') || (type=='tel') || (type=='url')))\\\\n		{\\\\n			cookie_name='ocp_autosave_'+window.location.pathname+window.location.search.replace(/[\\\\\\\\?&]redirect=.*/\\\",\\n	',',\\n	\\\"'')+':'+name;\\\\n			cookie_name=cookie_name.replace(/[\\\\\\\\.=\\\",\\n	',',\\n	\\\"; \\\\\\\\t\\\\\\\\r\\\\\\\\n\\\\\\\\013\\\\\\\\014\\\\\\\\/?]/g\\\",\\n	',',\\n	\\\"'');\\\\n			cookie_value=read_cookie(encodeURIComponent(cookie_name));\\\\n\\\\n			if ((cookie_value!='') && (cookie_value!='0'))\\\\n			{\\\\n				result=do_ajax_request('\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT\\\",array(\\\"autosave\\\")),\\n	\\\"?type=retrieve'+keep_stub()\\\",\\n	',',\\n	\\\"false\\\",\\n	',',\\n	\\\"'key='+window.encodeURIComponent(cookie_name));\\\\n				if ((result) && (result.responseText) && (posting_form.elements[i].value.length<result.responseText.length))\\\\n				{\\\\n					fields_to_do[name]=result.responseText;\\\\n					fields_to_do_counter++;\\\\n					if (result.responseText.length>biggest_length_data.length)\\\\n					{\\\\n						biggest_length_data=result.responseText.replace(/\\\\\\\\u0000/g\\\",\\n	',',\\n	\\\"''); // https://code.google.com/p/chromium/issues/detail?id=274983\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			window.last_autosave=new Date();\\\\n			add_event_listener_abstract(posting_form.elements[i]\\\",\\n	',',\\n	\\\"'keypress'\\\",\\n	',',\\n	\\\"handle_form_saving);\\\\n			posting_form.elements[i].externalonKeyPress=handle_form_saving;\\\\n		\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n	if ((fields_to_do_counter!=0) && (biggest_length_data!=''))\\\\n	{\\\\n		var key;\\\\n		if (biggest_length_data.length>100) biggest_length_data=biggest_length_data.substr(0\\\",\\n	',',\\n	\\\"100)+'...';\\\\n		window.fauxmodal_confirm(\\\\n			'\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"RESTORE_SAVED_FORM_DATA\\\",array()),\\n	\\\"\\\\\\\\n\\\\\\\\n'+biggest_length_data.replace(/<[^>]*>/g\\\",\\n	',',\\n	\\\"'')\\\",\\n	',',\\n	\\\"\\\\n			function(result)\\\\n			{\\\\n				if (result)\\\\n				{\\\\n					for (key in fields_to_do)\\\\n					{\\\\n						if (typeof fields_to_do[key]!='string') continue;\\\\n\\\\n						if ((posting_form.elements[key]) && (posting_form.elements[key].style))\\\\n						{\\\\n							set_textbox(posting_form.elements[key]\\\",\\n	',',\\n	\\\"fields_to_do[key]\\\",\\n	',',\\n	\\\"fields_to_do[key]);\\\\n						\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\" else\\\\n				{\\\\n					for (key in fields_to_do)\\\\n					{\\\\n						if (typeof fields_to_do[key]!='string') continue;\\\\n\\\\n						cookie_name='ocp_autosave_'+window.location.pathname+window.location.search.replace(/[\\\\\\\\?&]redirect=.*/\\\",\\n	',',\\n	\\\"'')+':'+key;\\\\n						cookie_name=cookie_name.replace(/[\\\\\\\\.=\\\",\\n	',',\\n	\\\"; \\\\\\\\t\\\\\\\\r\\\\\\\\n\\\\\\\\013\\\\\\\\014\\\\\\\\/?]/g\\\",\\n	',',\\n	\\\"'');\\\\n						set_cookie(encodeURIComponent(cookie_name)\\\",\\n	',',\\n	\\\"'0'\\\",\\n	',',\\n	\\\"0.1);\\\\n					\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n				\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n			\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n		);\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\nfunction handle_form_saving(event\\\",\\n	',',\\n	\\\"target\\\",\\n	',',\\n	\\\"force)\\\\n{\\\\n	var this_date=new Date();\\\\n	if (!force)\\\\n	{\\\\n		if ((this_date.getTime()-window.last_autosave.getTime())<20000) return; // Only save every 20 seconds\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n	if (typeof event=='undefined') var event=window.event;\\\\n	if (!target)\\\\n	{\\\\n		target=(event.target)?event.target:event.srcElement;\\\\n	\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n	var cookie_name='ocp_autosave_'+window.location.pathname+window.location.search.replace(/[\\\\\\\\?&]redirect=.*/\\\",\\n	',',\\n	\\\"'')+':'+target.name;\\\\n	cookie_name=cookie_name.replace(/[\\\\\\\\.=\\\",\\n	',',\\n	\\\"; \\\\\\\\t\\\\\\\\r\\\\\\\\n\\\\\\\\013\\\\\\\\014\\\\\\\\/?]/g\\\",\\n	',',\\n	\\\"'');\\\\n	var value=get_textbox(target)+String.fromCharCode(event.keyCode?event.keyCode:event.charCode);\\\\n	set_cookie(encodeURIComponent(cookie_name)\\\",\\n	',',\\n	\\\"'1'\\\",\\n	',',\\n	\\\"1);\\\\n	require_javascript('javascript_ajax');\\\\n	do_ajax_request('\\\",\\n	ecv(\\\$cl,array(2),0,\\\"FIND_SCRIPT_NOHTTP\\\",array(\\\"autosave\\\")),\\n	\\\"?type=store'+keep_stub()\\\",\\n	',',\\n	\\\"function() { \\\",\\n	\\\"}\\\",\\n	',',\\n	\\\"'key='+window.encodeURIComponent(cookie_name)+'&value='+window.encodeURIComponent(value));\\\\n\\\\n	window.last_autosave=this_date;\\\\n\\\",\\n	\\\"}\\\",\\n	\\\"\\\\n\\\\n\\\";\";\n\";}");

?>